<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  Greenplum - DBA Plus
  
  </title>
  
  
  <link href="atom.xml" rel="alternate" title="DBA Plus" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site: ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="_self" href="index.html">Home</a></li>
        
        <li id=""><a target="_self" href="archives.html">Archives</a></li>
        
        <li id=""><a target="_self" href="about.html">About</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="http://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; DBA Plus</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
        
        <li><a target="_self" href="index.html">Home</a></li>
        
        <li><a target="_self" href="archives.html">Archives</a></li>
        
        <li><a target="_self" href="about.html">About</a></li>
        

    <li><label>Categories</label></li>

        
            <li><a href="Redis.html">Redis</a></li>
        
            <li><a href="MySQL.html">MySQL</a></li>
        
            <li><a href="Greenplum.html">Greenplum</a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
	$(function(){
		$('#menu_item_index').addClass('is_active');
	});
</script>
<div class="row">
	<div class="large-8 medium-8 columns">
		<div class="markdown-body home-categories">
		
			<div class="article">
                <a class="clearlink" href="15001793154180.html">
                
                  <h1>安装Performance Monitor</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>参考：</p>

<p><a href="http://www.greenplumdba.com/setting-up-greenplum-command-center">Installing and enabling Greenplum Command Center</a></p>

<p><a href="http://www.zhongweicheng.com/?p=858">Installation GreenPlum Performance Monitor</a></p>

<p><a href="http://blog.csdn.net/jameswangcnbj/article/details/50740383">GreenPlum安装性能监控工具GPCCC（Greenplum Command Center Console）</a></p>

<ul>
<li>
<a href="#toc_0">前期准备：</a>
<ul>
<li>
<a href="#toc_1">安装依赖</a>
</li>
<li>
<a href="#toc_2">安装gpperfmon</a>
</li>
</ul>
</li>
<li>
<a href="#toc_3">安装 greenplum cc web</a>
<ul>
<li>
<a href="#toc_4">更改权限 &amp; 环境变量</a>
</li>
<li>
<a href="#toc_5">创建 Command Center 实例</a>
</li>
<li>
<a href="#toc_6">启动服务</a>
</li>
</ul>
</li>
</ul>


<h2 id="toc_0">前期准备：</h2>

<pre><code>a. 创建greenplum监控用数据库(gpperfmon)

b. 创建greenplum监控用数据库角色(gpmon)

c. 配置greenplum数据库接受来自perfmon监控的链接文件(pg_hba.conf和.pgpass)

d. 设置postgresql.conf文件，增加启用监控的参数。（这些参数默认会添加在文件的末尾）

gp_enable_gpperfmon=on
gpperfmon_port=8888
gp_external_enable_exec=on
gpperfmon_log_alert_level=warning

e. 设置pg_hba.conf文件，增加如下信息：

      local    gpperfmon         gpmon         md5
      host     all               gpmon         127.0.0.1/28    md5
</code></pre>

<h3 id="toc_1">安装依赖</h3>

<p>yum install vixie-cron -y   # 若 gpcc要安装 workload manaager，需要安装这个</p>

<h3 id="toc_2">安装gpperfmon</h3>

<p>[gpadmin@dbaone ~]$ gpperfmon_install --enable --password 123456 --port 5432</p>

<blockquote>
<p>20160412:16:10:01:019577 gpperfmon_install:dbaone:gpadmin-[INFO]:-PGPORT=5432 psql -f /opt/greenplum/greenplum-db/./lib/gpperfmon/gpperfmon3.sql template1 &gt;&amp; /dev/null<br/>
20160412:16:10:11:019577 gpperfmon_install:dbaone:gpadmin-[INFO]:-PGPORT=5432 psql -f /opt/greenplum/greenplum-db/./lib/gpperfmon/gpperfmon4.sql gpperfmon &gt;&amp; /dev/null<br/>
20160412:16:10:12:019577 gpperfmon_install:dbaone:gpadmin-[INFO]:-PGPORT=5432 psql -f /opt/greenplum/greenplum-db/./lib/gpperfmon/gpperfmon41.sql gpperfmon &gt;&amp; /dev/null<br/>
20160412:16:10:14:019577 gpperfmon_install:dbaone:gpadmin-[INFO]:-PGPORT=5432 psql -f /opt/greenplum/greenplum-db/./lib/gpperfmon/gpperfmon42.sql gpperfmon &gt;&amp; /dev/null<br/>
20160412:16:10:17:019577 gpperfmon_install:dbaone:gpadmin-[INFO]:-PGPORT=5432 psql -f /opt/greenplum/greenplum-db/./lib/gpperfmon/gpperfmonC.sql template1 &gt;&amp; /dev/null<br/>
20160412:16:10:17:019577 gpperfmon_install:dbaone:gpadmin-[INFO]:-PGPORT=5432 psql template1 -c &quot;DROP ROLE IF EXISTS gpmon&quot;  &gt;&amp; /dev/null<br/>
20160412:16:10:17:019577 gpperfmon_install:dbaone:gpadmin-[INFO]:-PGPORT=5432 psql template1 -c &quot;CREATE ROLE gpmon WITH SUPERUSER CREATEDB LOGIN ENCRYPTED PASSWORD &#39;123456&#39;&quot;  &gt;&amp; /dev/null<br/>
20160412:16:10:17:019577 gpperfmon_install:dbaone:gpadmin-[INFO]:-echo &quot;local    gpperfmon         gpmon         md5&quot; &gt;&gt; /opt/greenplum/greenplum-db/gpdata/gpmaster/gpseg-1/pg_hba.conf<br/>
20160412:16:10:17:019577 gpperfmon_install:dbaone:gpadmin-[INFO]:-echo &quot;host     all         gpmon         127.0.0.1/28    md5&quot; &gt;&gt; /opt/greenplum/greenplum-db/gpdata/gpmaster/gpseg-1/pg_hba.conf<br/>
20160412:16:10:17:019577 gpperfmon_install:dbaone:gpadmin-[INFO]:-touch /home/gpadmin/.pgpass &gt;&amp; /dev/null<br/>
20160412:16:10:17:019577 gpperfmon_install:dbaone:gpadmin-[INFO]:-mv -f /home/gpadmin/.pgpass /home/gpadmin/.pgpass.1460448601 &gt;&amp; /dev/null<br/>
20160412:16:10:17:019577 gpperfmon_install:dbaone:gpadmin-[INFO]:-echo &quot;*:5432:gpperfmon:gpmon:123456&quot; &gt;&gt; /home/gpadmin/.pgpass<br/>
20160412:16:10:17:019577 gpperfmon_install:dbaone:gpadmin-[INFO]:-cat /home/gpadmin/.pgpass.1460448601 &gt;&gt; /home/gpadmin/.pgpass<br/>
20160412:16:10:17:019577 gpperfmon_install:dbaone:gpadmin-[INFO]:-chmod 0600 /home/gpadmin/.pgpass &gt;&amp; /dev/null<br/>
20160412:16:10:17:019577 gpperfmon_install:dbaone:gpadmin-[INFO]:-PGPORT=5432 gpconfig -c gp_enable_gpperfmon -v on &gt;&amp; /dev/null<br/>
20160412:16:10:23:019577 gpperfmon_install:dbaone:gpadmin-[INFO]:-PGPORT=5432 gpconfig -c gpperfmon_port -v 8888 &gt;&amp; /dev/null<br/>
20160412:16:10:29:019577 gpperfmon_install:dbaone:gpadmin-[INFO]:-PGPORT=5432 gpconfig -c gp_external_enable_exec -v on --masteronly &gt;&amp; /dev/null<br/>
20160412:16:10:35:019577 gpperfmon_install:dbaone:gpadmin-[INFO]:-PGPORT=5432 gpconfig -c gpperfmon_log_alert_level -v warning &gt;&amp; /dev/null<br/>
20160412:16:10:40:019577 gpperfmon_install:dbaone:gpadmin-[INFO]:-gpperfmon will be enabled after a full restart of GPDB</p>
</blockquote>

<pre><code> # 跑一些脚本，创建表和视图
</code></pre>

<p>[gpadmin@dbaone ~]\( ll \)GPHOME/lib/gpperfmon/<br/>
total 56<br/>
-rwxr-xr-x 1 gpadmin gpadmin 18339 Nov 13 15:44 gpperfmon3.sql<br/>
-rwxr-xr-x 1 gpadmin gpadmin  9051 Nov 13 15:44 gpperfmon41.sql<br/>
-rwxr-xr-x 1 gpadmin gpadmin 14407 Nov 13 15:44 gpperfmon42.sql<br/>
-rwxr-xr-x 1 gpadmin gpadmin  3277 Nov 13 15:44 gpperfmon4.sql<br/>
-rwxr-xr-x 1 gpadmin gpadmin   250 Nov 13 15:44 gpperfmonC.sql</p>

<pre><code> # 重启gp生效
</code></pre>

<p>[gpadmin@dbaone ~]$ gpstop -afr</p>

<blockquote>
<p>20160412:16:40:14:020911 gpstop:dbaone:gpadmin-[INFO]:-Starting gpstop with args: -afr<br/>
20160412:16:40:14:020911 gpstop:dbaone:gpadmin-[INFO]:-Gathering information and validating the environment...<br/>
20160412:16:40:14:020911 gpstop:dbaone:gpadmin-[INFO]:-Obtaining Greenplum Master catalog information<br/>
20160412:16:40:14:020911 gpstop:dbaone:gpadmin-[INFO]:-Obtaining Segment details from master...<br/>
20160412:16:40:15:020911 gpstop:dbaone:gpadmin-[INFO]:-Greenplum Version: &#39;postgres (Greenplum Database) 4.3.6.2 build 1&#39;<br/>
20160412:16:40:15:020911 gpstop:dbaone:gpadmin-[INFO]:-There are 0 connections to the database<br/>
20160412:16:40:15:020911 gpstop:dbaone:gpadmin-[INFO]:-Commencing Master instance shutdown with mode=&#39;fast&#39;<br/>
20160412:16:40:15:020911 gpstop:dbaone:gpadmin-[INFO]:-Master host=dbaone<br/>
20160412:16:40:15:020911 gpstop:dbaone:gpadmin-[INFO]:-Detected 0 connections to database<br/>
20160412:16:40:15:020911 gpstop:dbaone:gpadmin-[INFO]:-Using standard WAIT mode of 120 seconds<br/>
20160412:16:40:15:020911 gpstop:dbaone:gpadmin-[INFO]:-Commencing Master instance shutdown with mode=fast<br/>
20160412:16:40:15:020911 gpstop:dbaone:gpadmin-[INFO]:-Master segment instance directory=/opt/greenplum/greenplum-db/gpdata/gpmaster/gpseg-1<br/>
20160412:16:40:16:020911 gpstop:dbaone:gpadmin-[INFO]:-Attempting forceful termination of any leftover master process<br/>
20160412:16:40:16:020911 gpstop:dbaone:gpadmin-[INFO]:-Terminating processes for segment /opt/greenplum/greenplum-db/gpdata/gpmaster/gpseg-1<br/>
20160412:16:40:16:020911 gpstop:dbaone:gpadmin-[INFO]:-Stopping master standby host dbafour mode=fast<br/>
20160412:16:40:17:020911 gpstop:dbaone:gpadmin-[INFO]:-Successfully shutdown standby process on dbafour<br/>
20160412:16:40:17:020911 gpstop:dbaone:gpadmin-[INFO]:-Commencing parallel primary segment instance shutdown, please wait...<br/>
20160412:16:40:17:020911 gpstop:dbaone:gpadmin-[INFO]:-0.00% of jobs completed<br/>
20160412:16:40:27:020911 gpstop:dbaone:gpadmin-[INFO]:-100.00% of jobs completed<br/>
20160412:16:40:27:020911 gpstop:dbaone:gpadmin-[INFO]:-Commencing parallel mirror segment instance shutdown, please wait...<br/>
20160412:16:40:27:020911 gpstop:dbaone:gpadmin-[INFO]:-0.00% of jobs completed<br/>
20160412:16:40:37:020911 gpstop:dbaone:gpadmin-[INFO]:-100.00% of jobs completed<br/>
20160412:16:40:37:020911 gpstop:dbaone:gpadmin-[INFO]:-----------------------------------------------------<br/>
20160412:16:40:37:020911 gpstop:dbaone:gpadmin-[INFO]:-   Segments stopped successfully      = 12<br/>
20160412:16:40:37:020911 gpstop:dbaone:gpadmin-[INFO]:-   Segments with errors during stop   = 0<br/>
20160412:16:40:37:020911 gpstop:dbaone:gpadmin-[INFO]:-----------------------------------------------------<br/>
20160412:16:40:37:020911 gpstop:dbaone:gpadmin-[INFO]:-Successfully shutdown 12 of 12 segment instances<br/>
20160412:16:40:37:020911 gpstop:dbaone:gpadmin-[INFO]:-Database successfully shutdown with no errors reported<br/>
20160412:16:40:37:020911 gpstop:dbaone:gpadmin-[INFO]:-Cleaning up leftover gpmmon process<br/>
20160412:16:40:37:020911 gpstop:dbaone:gpadmin-[INFO]:-No leftover gpmmon process found<br/>
20160412:16:40:37:020911 gpstop:dbaone:gpadmin-[INFO]:-Cleaning up leftover gpsmon processes<br/>
20160412:16:40:37:020911 gpstop:dbaone:gpadmin-[INFO]:-No leftover gpsmon processes on some hosts. not attempting forceful termination on these hosts<br/>
20160412:16:40:37:020911 gpstop:dbaone:gpadmin-[INFO]:-Cleaning up leftover shared memory<br/>
20160412:16:40:42:020911 gpstop:dbaone:gpadmin-[INFO]:-Restarting System...</p>
</blockquote>

<p>[gpadmin@dbaone ~]\( ps -ef | grep gpmmon | grep -v grep<br/>
gpadmin  21113 21104  0 16:40 ?        00:00:00 /opt/greenplum/greenplum-db-4.3.6.2/bin/gpmmon -D /opt/greenplum/greenplum-db/gpdata/gpmaster/gpseg-1/gpperfmon/conf/gpperfmon.conf -p 5432<br/>
[gpadmin@dbaone ~]\)<br/>
[gpadmin@dbaone ~]$ ps -ef | grep greenplum | grep -v grep<br/>
gpadmin  21104     1  0 16:40 ?        00:00:00 /opt/greenplum/greenplum-db-4.3.6.2/bin/postgres -D /opt/greenplum/greenplum-db/gpdata/gpmaster/gpseg-1 -p 5432 -b 1 -z 6 --silent-mode=true -i -M master -C -1 -x 14 -E<br/>
gpadmin  21113 21104  0 16:40 ?        00:00:00 /opt/greenplum/greenplum-db-4.3.6.2/bin/gpmmon -D /opt/greenplum/greenplum-db/gpdata/gpmaster/gpseg-1/gpperfmon/conf/gpperfmon.conf -p 5432<br/>
gpadmin  21393     1  0 16:40 ?        00:00:00 /opt/greenplum/greenplum-db/./bin/gpsmon -m 0 -i -t 150 -l /opt/greenplum/greenplum-db/gpdata/gpmaster/gpseg-1/gpperfmon/logs -v 0 8888</p>

<p>[gpadmin@dbaone ~]$ psql<br/>
psql (8.2.15)<br/>
Type &quot;help&quot; for help.</p>

<p>testdb=# \l<br/>
                  List of databases<br/>
   Name    |  Owner  | Encoding |  Access privileges<br/>
-----------+---------+----------+---------------------<br/>
 gpperfmon | gpadmin | UTF8     | gpadmin=CTc/gpadmin<br/>
                                : =c/gpadmin<br/>
 postgres  | gpadmin | UTF8     |<br/>
 template0 | gpadmin | UTF8     | =c/gpadmin<br/>
                                : gpadmin=CTc/gpadmin<br/>
 template1 | gpadmin | UTF8     | =c/gpadmin<br/>
                                : gpadmin=CTc/gpadmin<br/>
 testdb    | gpadmin | UTF8     |<br/>
(5 rows)</p>

<p>testdb=# select * from pg_user;<br/>
 usename | usesysid | usecreatedb | usesuper | usecatupd |  passwd  | valuntil | useconfig<br/>
---------+----------+-------------+----------+-----------+----------+----------+-----------<br/>
 gpadmin |       10 | t           | t        | t         | ******** |          |<br/>
 gpmon   |    19414 | t           | t        | t         | ******** |          |<br/>
(2 rows)</p>

<p>testdb=# \du<br/>
                       List of roles<br/>
 Role name |            Attributes             | Member of<br/>
-----------+-----------------------------------+-----------<br/>
 gpadmin   | Superuser, Create role, Create DB |<br/>
 gpmon     | Superuser, Create DB              |</p>

<pre><code> # 确认Performance Monitor数据库写入数据是否正常，检查是否有记录写入 「若第1次没有结果，等几秒再试一次」
</code></pre>

<p>[gpadmin@dbaone ~]$ psql gpperfmon -c &#39;SELECT * FROM system_now;&#39;<br/>
        ctime        | hostname | mem_total  |  mem_used  | mem_actual_used | mem_actual_free | swap_total | swap_used | swap_page_in | swap_page_out | cpu_user | cpu_sys | cpu_idle | load0 | load1 | load2 | quantum | disk_ro_rate | disk_wo_rate | disk_rb_rate | disk_wb<br/>
<u>rate | net</u>rp_rate | net_wp_rate | net_rb_rate | net_wb_rate<br/>
---------------------+----------+------------+------------+-----------------+-----------------+------------+-----------+--------------+---------------+----------+---------+----------+-------+-------+-------+---------+--------------+--------------+--------------+--------<br/>
------+-------------+-------------+-------------+-------------<br/>
 2016-04-12 16:47:45 | dbatwo   | 8254828544 | 8112623616 |      1895161856 |      6359666688 |  536866816 |         0 |            0 |             0 |     0.05 |    0.05 |     99.9 |     0 |  0.01 |     0 |      15 |            0 |            0 |            0 |<br/>
    0 |          16 |           9 |       21129 |       20901<br/>
 2016-04-12 16:47:45 | dbafour  | 8254828544 | 7996710912 |      1393299456 |      6861529088 |  536866816 |    253952 |            0 |             0 |     0.07 |    0.07 |    99.83 |  0.06 |  0.06 |  0.02 |      15 |            0 |            1 |            0 |<br/>
14229 |          17 |          11 |       21225 |       41669<br/>
 2016-04-12 16:47:45 | dbaone   | 8254828544 | 8084590592 |      3054915584 |      5199912960 |  536866816 |         0 |            0 |             0 |     0.35 |     0.2 |    99.45 |     0 |     0 |     0 |      15 |            0 |            2 |            0 |<br/>
 8715 |          22 |          17 |        2977 |        1907<br/>
 2016-04-12 16:47:45 | dbathree | 8254828544 | 8094613504 |      1864966144 |      6389862400 |  536866816 |   1363968 |            0 |             0 |     0.03 |    0.05 |    99.92 |  0.04 |  0.03 |     0 |      15 |            0 |            1 |            0 |<br/>
10893 |          17 |          11 |       41906 |       20978<br/>
(4 rows)</p>

<blockquote>
<p>将必要的 .pgpass 、pg_hba.conf 传到 standby master上</p>
</blockquote>

<p>[gpadmin@dbaone ~]$ scp .pgpass dbafour:/home/gpadmin/<br/>
.pgpass</p>

<p>[gpadmin@dbaone ~]\( scp \)MASTER_DATA_DIRECTORY/pg_hba.conf dbafour:/$MASTER_DATA_DIRECTORY/pg_hba.conf<br/>
pg_hba.conf</p>

<h2 id="toc_3">安装 greenplum cc web</h2>

<p>[root@dbaone greenplum-cc-web]# ./greenplum-cc-web-2.0.0-build-32-RHEL5-x86_64.bin</p>

<pre><code>********************************************************************************
Do you accept the Pivotal Greenplum Database end user license
agreement? [yes | no]
********************************************************************************

yes

********************************************************************************
Provide the installation path for Greenplum Command Center or
press ENTER to accept the default installation path:     

/usr/local/greenplum-cc-web-2.0.0-build-32
********************************************************************************

/opt/greenplum/greenplum-cc-web-2.0.0-build-32

********************************************************************************
Install Greenplum Command Center into &lt;/opt/greenplum/greenplum-cc-web-2.0.0-build-32&gt;? [yes | no]
********************************************************************************

yes

Extracting product to /opt/greenplum/greenplum-cc-web-2.0.0-build-32

********************************************************************************
Installation complete.
Greenplum Command Center is installed in /opt/greenplum/greenplum-cc-web-2.0.0-build-32

To complete the environment configuration, please ensure that the
gpcc_path.sh file is sourced.
********************************************************************************
</code></pre>

<h3 id="toc_4">更改权限 &amp; 环境变量</h3>

<p>[root]# chown gpadmin.gpadmin -R /opt/greenplum/greenplum-cc-web</p>

<p>[root]# chown gpadmin.gpadmin -R /opt/greenplum/greenplum-cc-web-2.0.0-build-32/</p>

<blockquote>
<p>加载环境变量 gpadmin &amp;&amp; root</p>
</blockquote>

<p>vim .bashrc</p>

<pre><code># For GP web
source /opt/greenplum/greenplum-cc-web/gpcc_path.sh
</code></pre>

<p>source ~/.bashrc</p>

<blockquote>
<p>修改权限</p>
</blockquote>

<p>vim $MASTER_DATA_DIRECTORY/pg_hba.conf</p>

<pre><code> host    gpperfmon   gpmon           ::1/128    md5
</code></pre>

<p>$ gpstop -u</p>

<blockquote>
<p>将 Master安装的，拷贝到 其他节点</p>
</blockquote>

<p>$ gpccinstall -f  /opt/greenplum/greenplum-db/conf/hostlist</p>

<h3 id="toc_5">创建 Command Center 实例</h3>

<p>[gpadmin@dbaone ~]$ gpcmdr --setup</p>

<pre><code>An instance name is used by the Greenplum Command Center as
a way to uniquely identify a Greenplum Database that has the monitoring
components installed and configured.  This name is also used to control
specific instances of the Greenplum Command Center web UI.  Instance names
can contain letters, digits and underscores and are not case sensitive.

Please enter a new instance name:
&gt; Mr_Liu_gp
The web component of the Greenplum Command Center can connect to a
monitor database on a remote Greenplum Database.

Is the master host for the Greenplum Database remote? Yy|Nn  (default=N):
&gt;
  The display name is shown in the web interface and does not need to be a hostname.

What would you like to use for the display name for this instance:
&gt; greenplum_test
What port does the Greenplum Database use? (default=5432):
&gt;
Creating instance schema in GPDB.  Please wait ...
The display name is shown in the web interface and does not need to bea hostname.

Would you like to install workload manager? Yy|Nn (default=N):        ## 若与master不在一台机器上，是不能选择y的。
&gt;
Skipping installation of workload manager.
The Greenplum Command Center runs a small web server for the UI and web API.
This web server by default runs on port 28080, but you may specify any available port.

What port would you like the web server to use for this instance? (default=28080):
&gt;
Users logging in to the Command Center must provide database user
credentials.  In order to protect user names and passwords, it is recommended 
that SSL be enabled.

Do you want to enable SSL for the Web API Yy|Nn (default=N):
&gt;

Do you want to enable ipV6 for the Web API Yy|Nn (default=N):
&gt;

Do you want to enable Cross Site Request Forgery Protection for the Web API Yy|Nn (default=N):
&gt;

Do you want to copy the instance to a standby master host Yy|Nn (default=Y):
&gt;
What is the hostname of the standby master host? [smdw]: dbafour
standby is dbafour

Done writing lighttpd configuration to /opt/greenplum/greenplum-cc-web/./instances/mr_liu_gp/conf/lighttpd.conf
Done writing web UI configuration to /opt/greenplum/greenplum-cc-web/./instances/mr_liu_gp/conf/gpperfmonui.conf
  Done writing web UI clustrs configuration to /opt/greenplum/greenplum-cc-web/./instances/mr_liu_gp/conf/clusters.conf

Copying instance &#39;mr_liu_gp&#39; to host &#39;dbafour&#39;...

Greenplum Command Center UI configuration is now complete.  If
at a later date you want to change certain parameters, you can
either re-run &#39;gpcmdr --setup&#39; or edit the configuration file
located at /opt/greenplum/greenplum-cc-    web/./instances/mr_liu_gp/conf/gpperfmonui.conf.

The web UI for this instance is available at http://dbaone:28080/

You can now start the web UI for this instance by running: gpcmdr -- start mr_liu_gp
No instances
</code></pre>

<p>vim /opt/greenplum/greenplum-cc-web/www/gpmonws.py</p>

<pre><code> # 修改连接 Greenplum database 恒为真

# This service can be called without a login
# To check if GPDB is up or not
# this can be used by the GUI to decide weather to display login screen or gpstart screen
class gpdbup:
  def GET(self):
    web.header(&#39;Content-Type&#39;, &#39;text/xml&#39;)
    web.header(&#39;Cache-Control&#39;, &#39;no-store&#39;)

    cleanKrbFile()
    database_up = False

    try:
        database_up = db.is_gpdb_running(gpdb_server_name)
    except db.GPDBError, errorinfo:
        return mkerr(error.DATA_ACCESS, errorinfo.__str__())

    #return render.gpdbup(database_up)
    return render.gpdbup(True)
</code></pre>

<p>or</p>

<pre><code> # 修改连接 Master的主机名

# This service can be called without a login
# To check if GPDB is up or not
# this can be used by the GUI to decide weather to display login screen or gpstart screen
class gpdbup:
def GET(self):
    web.header(&#39;Content-Type&#39;, &#39;text/xml&#39;)
    web.header(&#39;Cache-Control&#39;, &#39;no-store&#39;)

    cleanKrbFile()
    database_up = False

    try:
        #database_up = db.is_gpdb_running(gpdb_server_name)
        database_up = db.is_gpdb_running(&#39;dbaone&#39;)
    except db.GPDBError, errorinfo:
        return mkerr(error.DATA_ACCESS, errorinfo.__str__())

    return render.gpdbup(database_up)
</code></pre>

<p>若不修改文件，则为下面状况：<br/>
<img src="http://upload-images.jianshu.io/upload_images/60026-ede1f559e1c975d3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Image.png"/></p>

<h3 id="toc_6">启动服务</h3>

<p>$ gpcmdr --start mr_liu_gp</p>

<p><a href="http://dbaone:28080/">http://dbaone:28080/</a></p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/7/16</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Greenplum.html'>Greenplum</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      
                        <a href="15001793154180.html#disqus_thread">comments</a>
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15001790106489.html">
                
                  <h1>Greenplum安装篇</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>架构：默认Grouped Miior，建议Spread Mirror</p>

<p>          172.24.3.76「Master」<br/>
     -------------------------<br/>
     |          |             |</p>

<pre><code>172.24.3.77  172.24.3.78     172.24.3.79
Primary 1    Primary 3       Primary 5
Primary 2    Primary 4       Primary 6
Mirror 5     Mirror 1        Mirror 3
Mirror 6     Mirror 2        Mirror 4

                             Master Standy
</code></pre>

<blockquote>
<p>目录：</p>
</blockquote>

<ul>
<li>
<a href="#toc_0">第一部分 - Linux Configuration 「所有节点」</a>
<ul>
<li>
<a href="#toc_1">Add User 「所有节点执行」添加用户</a>
</li>
<li>
<a href="#toc_2">关闭 SELinux 、 iptables</a>
</li>
<li>
<a href="#toc_3">Yum 「防止初始化失败，ed 命令来修改配置文件」</a>
</li>
<li>
<a href="#toc_4">配置主机名 hosts</a>
</li>
<li>
<a href="#toc_5">配置内核参数</a>
</li>
<li>
<a href="#toc_6">配置资源限制</a>
</li>
<li>
<a href="#toc_7">XFS 分区</a>
</li>
<li>
<a href="#toc_8">设置Linux调度器规则，默认为 CFQ ，更改为 deadline</a>
</li>
<li>
<a href="#toc_9">    noop anticipatory [deadline] cfq</a>
</li>
<li>
<a href="#toc_10">禁用 Transparent Huge Pages (THP)</a>
</li>
<li>
<a href="#toc_11">修改磁盘预计参数 「预读扇区数」</a>
</li>
<li>
<a href="#toc_12">NTP 配置</a>
</li>
</ul>
</li>
<li>
<a href="#toc_13">第二部分 - 安装 Greenplum</a>
<ul>
<li>
<a href="#toc_14">更改权限</a>
</li>
<li>
<a href="#toc_15">配置 gp 机器host</a>
</li>
<li>
<a href="#toc_16">配置免密钥</a>
</li>
<li>
<a href="#toc_17"></a>
</li>
<li>
<a href="#toc_18">Greenplum 配置</a>
</li>
</ul>
</li>
<li>
<a href="#toc_19">第三部分 - 图形工具 GUI</a>
</li>
<li>
<a href="#toc_20">第四部分 -- Standby Master</a>
<ul>
<li>
<a href="#toc_21">添加 Standby Master</a>
</li>
<li>
<a href="#toc_22">删除 standby master</a>
</li>
<li>
<a href="#toc_23">重新同步 Standby Master「若已有 Standby Master，但这个节点已经不同步了，需要重启同步」</a>
</li>
<li>
<a href="#toc_24">查看 Standby Master 是否同步</a>
</li>
<li>
<a href="#toc_25">添加 Standby Master</a>
</li>
<li>
<a href="#toc_26">启用 Standby Master</a>
</li>
</ul>
</li>
</ul>


<h1 id="toc_0">第一部分 - Linux Configuration 「所有节点」</h1>

<h2 id="toc_1">Add User 「所有节点执行」添加用户</h2>

<p>groupadd -g 530 gpadmin<br/>
useradd -g 530 -u 530 -m -d /home/gpadmin -s /bin/bash gpadmin<br/>
chown -R gpadmin.gpadmin /home/gpadmin<br/>
echo &quot;gpadmin&quot; | passwd --stdin gpadmin</p>

<h2 id="toc_2">关闭 SELinux 、 iptables</h2>

<p>cat /etc/selinux/config  | grep &quot;<sup>SELINUX=&quot;</sup></p>

<pre><code>SELINUX=disabled
</code></pre>

<p>sestatus  # 查看当前SeLinux配置是 disabled</p>

<p>/etc/init.d/iptables status</p>

<p>chkconfig --list | grep iptables | grep on</p>

<h2 id="toc_3">Yum 「防止初始化失败，ed 命令来修改配置文件」</h2>

<p>yum install ed -y</p>

<h2 id="toc_4">配置主机名 hosts</h2>

<p>vim /etc/hosts</p>

<pre><code>127.0.0.1   localhost localhost.localdomain localhost4  localhost4.localdomain4
::1         localhost localhost.localdomain localhost6  localhost6.localdomain6
172.24.3.76  dbaone
172.24.3.77  dbatwo
172.24.3.78  dbathree
172.24.3.79  dbafour
</code></pre>

<p>scp /etc/hosts dbaone:/etc<br/>
scp /etc/hosts dbatwo:/etc<br/>
scp /etc/hosts dbathree:/etc<br/>
scp /etc/hosts dbafour:/etc</p>

<h2 id="toc_5">配置内核参数</h2>

<p>vim /etc/sysctl.conf</p>

<pre><code>#xfs_mount_options = rw,noatime,inode64,allocsize=16m   # 因为使用不是xfs，所以注释此行kernel.shmmax = 500000000
kernel.shmmni = 4096
kernel.shmall = 4000000000
kernel.sem = 250 512000 100 2048
kernel.sysrq = 1
kernel.core_uses_pid = 1
kernel.msgmnb = 65536
kernel.msgmax = 65536
kernel.msgmni = 2048
net.ipv4.tcp_syncookies = 1
net.ipv4.ip_forward = 0
net.ipv4.conf.default.accept_source_route = 0
net.ipv4.tcp_tw_recycle = 1
net.ipv4.tcp_max_syn_backlog = 4096
net.ipv4.conf.all.arp_filter = 1
net.ipv4.conf.defalut.arp_filter = 1
# add 20160331 ########
net.ipv4.ip_local_port_range = 1025 65535
net.core.netdev_max_backlog = 10000
net.core.rmem_max = 2097152
net.core.wmem_max = 2097152
#vm.overcommit_memory = 2     ### 测试环境要取消这个，否则oracle启不来 ### 值为1
</code></pre>

<p>sysctl -p</p>

<h2 id="toc_6">配置资源限制</h2>

<p>vim /etc/security/limits.conf</p>

<pre><code>soft nofile 65536* hard nofile 65536
soft nproc 131072
hard nproc 131072
</code></pre>

<p>vim /etc/security/limits.d/90-nproc.conf # 「将1024 修改为131072」</p>

<pre><code>soft nofile 65536
hard nofile 65536
soft nproc 131072
hard nproc 131072
</code></pre>

<h2 id="toc_7">XFS 分区</h2>

<p>yum install xfsprogs</p>

<p>mkfs.xfs -f /dev/[device]</p>

<p>vim /etc/fstab  # <em>后2位是 1 1 吗？</em></p>

<p>     /dev/[device] /[partition] xfs rw,noatime,inode64,allocsize=16m 0 0</p>

<h2 id="toc_8">设置Linux调度器规则，默认为 CFQ ，更改为 deadline</h2>

<p>cat /sys/block/{devname}/queue/scheduler<br/>
 </p>

<h2 id="toc_9">    noop anticipatory [deadline] cfq</h2>

<pre><code>echo deadline &gt; /sys/block/**{devname}**/queue/scheduler
</code></pre>

<blockquote>
<p>固化配置<br/>
cat /etc/rc.d/rc.local</p>
</blockquote>

<p>    echo deadline &gt; /sys/block/<strong>{devname</strong>/queue/scheduler</p>

<p>or </p>

<p>vim /boot/grub/menu.lst   # 配置错误会导致系统启动失败</p>

<pre><code># Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /boot/, eg.
#          root (hd0,0)
#          kernel /vmlinuz-version ro root=/dev/mapper/VolGroup00-LogVol00
#          initrd /initrd-[generic-]version.img
#boot=/dev/vda
default=0
timeout=5

title CentOS (2.6.32-573.7.1.el6.x86_64)
</code></pre>

<p>        root (hd0,0)<br/>
        kernel /vmlinuz-2.6.32-573.7.1.el6.x86_64 ro root=/dev/mapper/VolGroup00-LogVol00 rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=uk LANG=en_US.UTF-8 rd_NO_MD  crashkernel=auto rd_LVM_LV=VolGroup00/LogVol01 rd_LVM_LV=VolGroup00/LogVol00 SYSFONT=latarcyrheb-sun16 rd_NO_DM  <strong> elevator=deadline</strong><br/>
        initrd /initramfs-2.6.32-573.7.1.el6.x86_64.img</p>

<h2 id="toc_10">禁用 Transparent Huge Pages (THP)</h2>

<p>cat /sys/kernel/mm/redhat_transparent_hugepage/defrag<br/>
     [always] madvise never</p>

<p>echo never &gt; /sys/kernel/mm/redhat_transparent_hugepage/defrag</p>

<p>     # 固化配置<br/>
    vim /etc/rc.d/rc.local<br/>
 <br/>
    if test -f /sys/kernel/mm/transparent_hugepage/enabled; then<br/>
     echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled<br/>
    fi</p>

<pre><code>if test -f /sys/kernel/mm/transparent_hugepage/defrag; then
</code></pre>

<p>     echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag<br/>
    fi</p>

<p>or</p>

<pre><code>vim /boot/grub/menu.lst   # 配置错误会导致系统启动失败

# Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /boot/, eg.
#          root (hd0,0)
#          kernel /vmlinuz-version ro root=/dev/mapper/VolGroup00-LogVol00
#          initrd /initrd-[generic-]version.img
#boot=/dev/vda
default=0
timeout=5

title CentOS (2.6.32-573.7.1.el6.x86_64)
</code></pre>

<p>        root (hd0,0)<br/>
        kernel /vmlinuz-2.6.32-573.7.1.el6.x86_64 ro root=/dev/mapper/VolGroup00-LogVol00 rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=uk LANG=en_US.UTF-8 rd_NO_MD  crashkernel=auto rd_LVM_LV=VolGroup00/LogVol01 rd_LVM_LV=VolGroup00/LogVol00 SYSFONT=latarcyrheb-sun16 rd_NO_DM  <strong> elevator=deadline transparent_hugepage=never</strong><br/>
        initrd /initramfs-2.6.32-573.7.1.el6.x86_64.img</p>

<h2 id="toc_11">修改磁盘预计参数 「预读扇区数」</h2>

<p>/sbin/blockdev --getra /dev/[device]<br/>
     256</p>

<p>/sbin/blockdev --setra 16384 /dev/[device]</p>

<h2 id="toc_12">NTP 配置</h2>

<p>$ date<br/>
     Mon Apr 11 15:28:05 CST 2016</p>

<p>若显示不是CST，copy覆盖<br/>
cp /usr/share/zoneinfo/Asia/Chongqing /etc/local</p>

<p>vim /etc/ntp.conf</p>

<pre><code>server 172.24.2.10 prefer
server 172.24.2.11
</code></pre>

<p>/etc/init.d/ntpd status<br/>
     ntpd (pid  1666) is running...</p>

<h1 id="toc_13">第二部分 - 安装 Greenplum</h1>

<p>./greenplum-db-4.3.8.0-build-1-RHEL5-x86_64.bin</p>

<pre><code>********************************************************************************
Do you accept the Pivotal Database license agreement? [yes|no]
********************************************************************************

yes

********************************************************************************
Provide the installation path for Greenplum Database or press ENTER to
accept the default installation path: /usr/local/greenplum-db-4.3.8.0
********************************************************************************

/opt/greenplum/greenplum-db-4.3.8.0

********************************************************************************
Install Greenplum Database into &lt;/opt/greenplum/greenplum-db-4.3.8.0&gt;? [yes|no]
********************************************************************************

yes

********************************************************************************
/opt/greenplum/greenplum-db-4.3.8.0 does not exist.
Create /opt/greenplum/greenplum-db-4.3.8.0 ? [yes|no]
(Selecting no will exit the installer)
    ********************************************************************************

yes

Extracting product to /opt/greenplum/greenplum-db-4.3.8.0

********************************************************************************
Installation complete.
Greenplum Database is installed in /opt/greenplum/greenplum-db-4.3.8.0

Pivotal Greenplum documentation is available
for download at http://docs.gopivotal.com/gpdb
********************************************************************************
</code></pre>

<h2 id="toc_14">更改权限</h2>

<p>chown -R gpadmin.gpadmin /opt/greenplum/</p>

<p>chown -R gpadmin.gpadmin /opt/greenplum/greenplum-db</p>

<h2 id="toc_15">配置 gp 机器host</h2>

<p>su - gpadmin</p>

<p>mkdir -p /opt/greenplum/greenplum-db/conf</p>

<p>$ cat /opt/greenplum/greenplum-db/conf/hostlist<br/>
dbaone<br/>
dbatwo<br/>
dbathree<br/>
dbafour</p>

<p>$ cat /opt/greenplum/greenplum-db/conf/seg_hosts<br/>
dbatwo<br/>
dbathree<br/>
dbafour</p>

<h2 id="toc_16">配置免密钥</h2>

<blockquote>
<p>若ssh端口是22，使用此方法，否则手工配置免密钥</p>
</blockquote>

<p>$ gpssh-exkeys -f /opt/greenplum/greenplum-db/conf/hostlist</p>

<p>安装免密</p>

<p>[gpadmin@dbaone .ssh]$ gpssh-exkeys -f /opt/greenplum/greenplum-db/conf/hostlist<br/>
[STEP 1 of 5] create local ID and authorize on local host<br/>
  ... /home/gpadmin/.ssh/id_rsa file exists ... key generation skipped</p>

<p>[STEP 2 of 5] keyscan all hosts and update known_hosts file</p>

<p>[STEP 3 of 5] authorize current user on remote hosts<br/>
  ... send to sdw1<br/>
[ERROR sdw1] [Errno 111] Connection refused<br/>
[ERROR sdw1] skipping key exchange for sdw1<br/>
[ERROR sdw1] unable to authorize current user</p>

<p>[gpadmin@dbaone ~]$ gpssh -f /opt/greenplum/greenplum-db/conf/hostlist<br/>
Note: command history unsupported on this machine ...<br/>
=&gt;<br/>
=&gt; pwd<br/>
[ mdw] /home/gpadmin<br/>
[sdw1] /home/gpadmin<br/>
[sdw3] /home/gpadmin<br/>
[sdw2] /home/gpadmin</p>

<p>cd /opt/greenplum/<br/>
tar -czf gp.4.3.6.1.tar.gz greenplum-db-4.3.6.1/<br/>
chown gpadmin.gpadmin gp.4.3.6.1.tar.gz </p>

<p>source /opt/greenplum/greenplum-db/greenplum_path.sh</p>

<p>gpssh -f /opt/greenplum/greenplum-db/conf/seg_hosts -e -v  &quot;mkdir -p /opt/greenplum &amp;&amp; chown gpadmin.gpadmin -R /opt/greenplum&quot;</p>

<p>$ gpscp -f /opt/greenplum/greenplum-db/conf/seg_hosts /opt/greenplum/gp.4.3.6.1.tar.gz  =:/opt/greenplum/</p>

<p>$ gpssh -f /opt/greenplum/greenplum-db/conf/seg_hosts -e -v &quot;cd /opt/greenplum &amp;&amp; tar -zxf gp.4.3.6.1.tar.gz&quot;</p>

<blockquote>
<p>建立软链接「Master直接安装，自动创建链链接的，其他节点需要手工创建软链接，原Master节点软链接要删除下」</p>
</blockquote>

<p>$ gpssh -f /opt/greenplum/greenplum-db/conf/seg_hosts -e -v &quot;cd /opt/greenplum &amp;&amp; ln -s greenplum-db-4.3.8.0 greenplum-db&quot;</p>

<p>$ gpssh -f /opt/greenplum/greenplum-db/conf/<strong>hostlist</strong> -e &quot;cd /opt/greenplum &amp;&amp; ll&quot;</p>

<p>[gpadmin@dbaone ~]$ gpssh -f /opt/greenplum/greenplum-db/conf/hostlist -e &quot;cd /opt/greenplum &amp;&amp; ll&quot;<br/>
[  dbatwo] cd /opt/greenplum &amp;&amp; ll<br/>
[  dbatwo] total 140364<br/>
[  dbatwo] -rw-r--r--  1 gpadmin gpadmin 143726939 Apr 11 16:25 gp.4.3.8.0.tar.gz<br/>
[  dbatwo] lrwxrwxrwx  1 gpadmin gpadmin        20 Apr 11 16:30 greenplum-db -&gt; greenplum-db-4.3.8.0<br/>
[  dbatwo] drwxr-xr-x 12 gpadmin gpadmin      4096 Apr 11 15:55 greenplum-db-4.3.8.0<br/>
[ dbafour] cd /opt/greenplum &amp;&amp; ll<br/>
[ dbafour] total 140364<br/>
[ dbafour] -rw-r--r--  1 gpadmin gpadmin 143726939 Apr 11 16:25 gp.4.3.8.0.tar.gz<br/>
[ dbafour] lrwxrwxrwx  1 gpadmin gpadmin        20 Apr 11 16:30 greenplum-db -&gt; greenplum-db-4.3.8.0<br/>
[ dbafour] drwxr-xr-x 12 gpadmin gpadmin      4096 Apr 11 15:55 greenplum-db-4.3.8.0<br/>
[dbathree] cd /opt/greenplum &amp;&amp; ll<br/>
[dbathree] total 140364<br/>
[dbathree] -rw-r--r--  1 gpadmin gpadmin 143726939 Apr 11 16:25 gp.4.3.8.0.tar.gz<br/>
[dbathree] lrwxrwxrwx  1 gpadmin gpadmin        20 Apr 11 16:30 greenplum-db -&gt; greenplum-db-4.3.8.0<br/>
[dbathree] drwxr-xr-x 12 gpadmin gpadmin      4096 Apr 11 15:55 greenplum-db-4.3.8.0<br/>
[  dbaone] cd /opt/greenplum &amp;&amp; ll<br/>
[  dbaone] total 140364<br/>
[  dbaone] -rw-r--r--  1 gpadmin gpadmin 143726939 Apr 11 16:25 gp.4.3.8.0.tar.gz<br/>
[  dbaone] lrwxrwxrwx  1 gpadmin gpadmin        22 Apr 11 15:49 greenplum-db -&gt; ./greenplum-db-4.3.8.0<br/>
[  dbaone] drwxr-xr-x 12 gpadmin gpadmin      4096 Apr 11 15:55 greenplum-db-4.3.8.0</p>

<p>   &gt;  创建数据目录「gpmaster保存Master数据，每个机器gpdata1、gpdata2分别对应这个机器的两个主数据节点(Primary)，gpdatam1、gpdatam2对应备数据节点(Mirror)」</p>

<p>gpssh -f /opt/greenplum/greenplum-db/conf/<strong>hostlist</strong> -e -v &quot;mkdir -p /opt/greenplum/greenplum-db/gpdata/{gpmaster,gpdatap1,gpdatap2,gpdatam1,gpdatam2}&quot;</p>

<blockquote>
<p>配置环境变量</p>
</blockquote>

<p>$ gpssh -f /opt/greenplum/greenplum-db/conf/hostlist -e -v &quot;cat &gt;&gt; /home/gpadmin/.bash_profile &lt;&lt;EOF</p>

<p>source /opt/greenplum/greenplum-db/greenplum_path.sh<br/>
export MASTER_DATA_DIRECTORY=/opt/greenplum/greenplum-db/gpdata/gpmaster/gpseg-1<br/>
export GPPORT=5432<br/>
export PGDATABASE=testDB<br/>
EOF&quot;</p>

<p>. .bash_profile</p>

<blockquote>
<p>系统参数校验：&quot;$PGHOME/etc/gpcheck.cnf&quot; </p>
</blockquote>

<p>gpcheck -f /opt/greenplum/greenplum-db/conf/hostlist</p>

<blockquote>
<p>网络测试</p>
</blockquote>

<p>gpcheckperf -d /tmp/ upload -r N -f /opt/greenplum/greenplum-db/conf/seg_hosts</p>

<p>or</p>

<p>gpcheckperf -d /tmp/ upload -r N -h dbathree -h dbafour  # &quot;单独测试2台机器网络&quot;</p>

<blockquote>
<p>文件系统测试</p>
</blockquote>

<p>gpcheckperf -f seg_hosts  -d /opt/greenplum/greenplum-db/gpdata/gpdatap1 -d /opt/greenplum/greenplum-db/gpdata/gpdatap2 -d /opt/greenplum/greenplum-db/gpdata/gpdatam1 -d /opt/greenplum/greenplum-db/gpdata/gpdatam2 -r ds</p>

<blockquote>
<p>初始化 Greenplum 配置文件<br/>
配置文件模板都在 /opt/greenplum/greenplum-db/docs/cli_help/gpconfigs<br/>
gpinitsystem_config 是初始化 Greenplum 的模板，此模板中 Mirror Segment的配置都被注释</p>
</blockquote>

<p>[gpadmin@dbaone ~]$ cd /opt/greenplum/greenplum-db/docs/cli_help/gpconfigs</p>

<p>$ cp gpinitsystem_config initgp_config</p>

<p>$ vim initgp_config</p>

<pre><code>ARRAY_NAME=&quot;EMC Greenplum DW&quot;
MACHINE_LIST_FILE=/opt/greenplum/greenplum-db/conf/seg_hosts
SEG_PREFIX=gpseg
PORT_BASE=40000
declare -a DATA_DIRECTORY=(/opt/greenplum/greenplum-db/gpdata/gpdatap1 /opt/greenplum/greenplum-db/gpdata/gpdatap2)
MASTER_HOSTNAME=dbaone
MASTER_DIRECTORY=/opt/greenplum/greenplum-db/gpdata/gpmaster
MASTER_PORT=5432
TRUSTED_SHELL=ssh
CHECK_POINT_SEGMENTS=8
ENCODING=UNICODE
MIRROR_PORT_BASE=50000
REPLICATION_PORT_BASE=41000
MIRROR_REPLICATION_PORT_BASE=51000
declare -a MIRROR_DATA_DIRECTORY=(/opt/greenplum/greenplum-db/gpdata/gpdatam1 /opt/greenplum/greenplum-db/gpdata/gpdatam2)
</code></pre>

<h2 id="toc_17"></h2>

<blockquote>
<p>初始化pg，-s 表示 standby master，若gp版本为3.8.0 不要在初始化加 standby master。</p>
</blockquote>

<p> &gt;备份方案有2种（Grouped Miior、Spread Mirror）,-S 表示使用Spread Mirror 分配 mirror节点，防止一个节点挂掉，另外一个节点集中成为瓶颈！  P301</p>

<p>[gpadmin@dbaone gpconfigs]$ gpinitsystem -c initgp_config -s dbafour -S</p>

<blockquote>
<p>$ gpinitsystem -c initgp_config -S</p>

<p>若初始化失败，需要删除数据目录重新来<br/>
gpssh -f /opt/greenplum/greenplum-db/conf/hostlist -e -v &quot;cd /opt/greenplum/greenplum-db/gpdata/ &amp;&amp; rm -rf gpmaster/* &amp;&amp; rm -rf gpdatap1/* &amp;&amp; rm -rf gpdatap2/* &amp;&amp; rm -rf gpdatam1/* &amp;&amp; rm -rf gpdatam2/* &quot;</p>
</blockquote>

<h2 id="toc_18">Greenplum 配置</h2>

<blockquote>
<p> 1&gt;、配置远程可登陆</p>
</blockquote>

<p>[gpadmin@dbaone ~]$ psql postgres<br/>
psql (8.2.15)<br/>
Type &quot;help&quot; for help.</p>

<p>testdb=# alter role gpadmin with password &#39;gpadmin&#39;;<br/>
ALTER ROLE</p>

<blockquote>
<p>为了保证与standby master 配置文件一致，standby master的配置文件也要修改！</p>
</blockquote>

<p>[gpadmin@dbaone ~]\( vim \)MASTER_DATA_DIRECTORY/pg_hba.conf</p>

<p>host    all     gpadmin         0.0.0.0/0 md5</p>

<p>[gpadmin@four ~]\( vim \)MASTER_DATA_DIRECTORY/pg_hba.conf</p>

<p>host    all     gpadmin         0.0.0.0/0 md5</p>

<blockquote>
<p>使配置生效！</p>
</blockquote>

<p>[gpadmin@dbaone ~]$ gpstop -u<br/>
20160405:10:59:06:023782 gpstop:dbaone:gpadmin-[INFO]:-Starting gpstop with args: -u<br/>
20160405:10:59:06:023782 gpstop:dbaone:gpadmin-[INFO]:-Gathering information and validating the environment...<br/>
20160405:10:59:06:023782 gpstop:dbaone:gpadmin-[INFO]:-Obtaining Greenplum Master catalog information<br/>
20160405:10:59:06:023782 gpstop:dbaone:gpadmin-[INFO]:-Obtaining Segment details from master...<br/>
20160405:10:59:07:023782 gpstop:dbaone:gpadmin-[INFO]:-Greenplum Version: &#39;postgres (Greenplum Database) 4.3.6.1 build 2&#39;<br/>
20160405:10:59:07:023782 gpstop:dbaone:gpadmin-[INFO]:-Signalling all postmaster processes to reload<br/>
.</p>

<p>C:\Users\Star&gt;psql -h 172.24.3.76 -p5432 -d postgres -U gpadmin<br/>
Password for user gpadmin:<br/>
psql (8.2.15)<br/>
Type &quot;help&quot; for help.</p>

<p>初始化后：登陆「」</p>

<p>[gpadmin@dbaone ~]$ psql -d postgres</p>

<blockquote>
<p>查看当前所有db</p>
</blockquote>

<p>postgres=# \l<br/>
                  List of databases<br/>
   Name    |  Owner  | Encoding |  Access privileges <br/>
-----------+---------+----------+---------------------<br/>
 postgres  | gpadmin | UTF8     |<br/>
 template0 | gpadmin | UTF8     | =c/gpadmin         <br/>
                                : gpadmin=CTc/gpadmin<br/>
 template1 | gpadmin | UTF8     | =c/gpadmin         <br/>
                                : gpadmin=CTc/gpadmin<br/>
(3 rows)</p>

<blockquote>
<p>创建表，并查看当前db下所有table</p>
</blockquote>

<p>testdb=# create table t1(id int primary key ,name varchar(128));<br/>
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index &quot;t1_pkey&quot; for table &quot;t1&quot;<br/>
CREATE TABLE<br/>
testdb=#<br/>
testdb=# \d<br/>
             List of relations<br/>
 Schema | Name | Type  |  Owner  | Storage<br/>
--------+------+-------+---------+---------<br/>
 public | t1   | table | gpadmin | heap<br/>
(1 row)</p>

<blockquote>
<p>启动与关闭数据库「-a 不会手动输入yes了」</p>
</blockquote>

<p>$ gpstart -a</p>

<p>$ gpstop -a</p>

<blockquote>
<p>reload 配置文件</p>
</blockquote>

<p>$ gpstop -u</p>

<blockquote>
<p>查看状态</p>
</blockquote>

<p>gpstat -e #查看mirror的状态<br/>
gpstat -f #查看standby master的状态<br/>
gpstat -s #查看整个GP群集的状态<br/>
gpstat -i #查看GP的版本<br/>
gpstat --help #帮助文档，可以查看gpstat更多用法</p>

<h1 id="toc_19">第三部分 - 图形工具 GUI</h1>

<p>     Navicat Premium<br/>
     <br/>
     pgAdmin</p>

<p>          <a href="http://www.pgadmin.org/download/?lang=zh_CN">http://www.pgadmin.org/download/?lang=zh_CN</a></p>

<p>          <a href="http://www.postgresql.org/ftp/pgadmin3/release/">http://www.postgresql.org/ftp/pgadmin3/release/</a></p>

<blockquote>
<p>保存密码<br/>
警 告： 你 已 经 选 择 了 保 存 密 码， 在 *nix 下 它 将 被 保 存 在 home 目 录 的 纯 文 本 文 件 中， 而 在 Windows 系 统 下 它 将 被 保 存 在 用 户 的 配 置 文 件 中。 如 果 你 不 想 这 么 做， 请 点 击 Cancel 按 钮。 <br/>
pgAdmin 使 用 PostgreSQL 的 &#39;pgpass&#39; 机 制 保 存 密 码。 在 *nix 系 统 下， 密 码 将 被 保 存 在 ~/.pgpass 文 件 中； 而 在 Windows 系 统 下， 它 将 被 保 存 在 %APPDATA%\PostgreSQL\pgpass.conf 文 件 中 （%APPDATA% 是 位 于 用 户 配 置 文 件 之 内 的 &#39;Application Data&#39; 文 件 夹）。 这 个 机 制 被 用 来 作 为 使 用 libpg 库 连 接 数 据 库 服 务 器 的 所 有 程 序 的 缺 省 机 制， 包 括 命 令 行 程 序（例 如 pg_dump 和 pg_restore）、 其 他 GUI 程 序、 驱 动 程 序 （例 如 ： psqlODBC）。 这 意 味 着 这 些 程 序 都 可 以 使 用 这 个 保 存 的 密 码 自 动 连 接 到 数 据 库， 如 果 你 不 想 这 样 做， 不 要 使 用 pgAdmin 的 Store Password 的 选 项。</p>
</blockquote>

<h1 id="toc_20">第四部分 -- Standby Master</h1>

<h2 id="toc_21">添加 Standby Master</h2>

<p>参考：<a href="https://app.yinxiang.com/shard/s6/nl/387421/c576c73f-e417-40e5-8a9a-90bf229d3380">greenplum数据库master节点搭建standby</a></p>

<h2 id="toc_22">删除 standby master</h2>

<p>     gpinitstandby -r</p>

<h2 id="toc_23">重新同步 Standby Master「若已有 Standby Master，但这个节点已经不同步了，需要重启同步」</h2>

<p>     gpinitstandby -n</p>

<h2 id="toc_24">查看 Standby Master 是否同步</h2>

<blockquote>
<p>GP 4.1<br/>
testdb=# select * from gp_master_mirroring;</p>

<p>GP 4.3<br/>
testdb=# select procpid,state from pg_stat_replication;<br/>
 procpid |   state   <br/>
---------+-----------<br/>
    1806 | streaming<br/>
(1 row)</p>
</blockquote>

<h2 id="toc_25">添加 Standby Master</h2>

<p>[gpadmin@dbaone ~]$ gpinitstandby -s dbafour</p>

<blockquote>
<p>20160408:10:47:23:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Validating environment and parameters for standby initialization...<br/>
20160408:10:47:23:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Checking for filespace directory /opt/greenplum/greenplum-db/gpdata/gpmaster/gpseg-1 on dbafour<br/>
20160408:10:47:23:001705 gpinitstandby:dbaone:gpadmin-[INFO]:------------------------------------------------------<br/>
20160408:10:47:23:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Greenplum standby master initialization parameters<br/>
20160408:10:47:23:001705 gpinitstandby:dbaone:gpadmin-[INFO]:------------------------------------------------------<br/>
20160408:10:47:23:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Greenplum master hostname               = dbaone<br/>
20160408:10:47:23:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Greenplum master data directory         = /opt/greenplum/greenplum-db/gpdata/gpmaster/gpseg-1<br/>
20160408:10:47:23:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Greenplum master port                   = 5432<br/>
20160408:10:47:23:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Greenplum standby master hostname       = dbafour<br/>
20160408:10:47:23:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Greenplum standby master port           = 5432<br/>
20160408:10:47:23:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Greenplum standby master data directory = /opt/greenplum/greenplum-db/gpdata/gpmaster/gpseg-1<br/>
20160408:10:47:23:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Greenplum update system catalog         = On<br/>
20160408:10:47:23:001705 gpinitstandby:dbaone:gpadmin-[INFO]:------------------------------------------------------<br/>
20160408:10:47:23:001705 gpinitstandby:dbaone:gpadmin-[INFO]:- Filespace locations<br/>
20160408:10:47:23:001705 gpinitstandby:dbaone:gpadmin-[INFO]:------------------------------------------------------<br/>
20160408:10:47:23:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-pg_system -&gt; /opt/greenplum/greenplum-db/gpdata/gpmaster/gpseg-1<br/>
Do you want to continue with standby master initialization? Yy|Nn (default=N):<br/>
y<br/>
20160408:10:47:59:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Syncing Greenplum Database extensions to standby<br/>
20160408:10:47:59:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-The packages on dbafour are consistent.<br/>
20160408:10:47:59:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Adding standby master to catalog...<br/>
20160408:10:47:59:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Database catalog updated successfully.<br/>
20160408:10:47:59:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Updating pg_hba.conf file...<br/>
20160408:10:48:05:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-pg_hba.conf files updated successfully.<br/>
20160408:10:48:07:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Updating filespace flat files...<br/>
20160408:10:48:07:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Filespace flat file updated successfully.<br/>
20160408:10:48:08:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Starting standby master<br/>
20160408:10:48:08:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Checking if standby master is running on host: dbafour  in directory: /opt/greenplum/greenplum-db/gpdata/gpmaster/gpseg-1<br/>
20160408:10:48:10:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Cleaning up pg_hba.conf backup files...<br/>
20160408:10:48:15:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Backup files of pg_hba.conf cleaned up successfully.<br/>
20160408:10:48:15:001705 gpinitstandby:dbaone:gpadmin-[INFO]:-Successfully created standby master on dbafour</p>
</blockquote>

<p>testdb=# select * from gp_segment_configuration order by 1;<br/>
 dbid | content | role | preferred_role | mode | status | port  | hostname | address  | replication_port | san_mounts<br/>
------+---------+------+----------------+------+--------+-------+----------+----------+------------------+------------<br/>
    1 |      -1 | p    | p              | s    | u      |  5432 | dbaone   | dbaone   |                  |<br/>
    2 |       0 | p    | p              | s    | u      | 40000 | dbafour  | dbafour  |            41000 |<br/>
    3 |       1 | p    | p              | s    | u      | 40001 | dbafour  | dbafour  |            41001 |<br/>
    4 |       2 | p    | p              | s    | u      | 40000 | dbathree | dbathree |            41000 |<br/>
    5 |       3 | p    | p              | s    | u      | 40001 | dbathree | dbathree |            41001 |<br/>
    6 |       4 | p    | p              | s    | u      | 40000 | dbatwo   | dbatwo   |            41000 |<br/>
    7 |       5 | p    | p              | s    | u      | 40001 | dbatwo   | dbatwo   |            41001 |<br/>
    8 |       0 | m    | m              | s    | u      | 50000 | dbathree | dbathree |            51000 |<br/>
    9 |       1 | m    | m              | s    | u      | 50001 | dbathree | dbathree |            51001 |<br/>
   10 |       2 | m    | m              | s    | u      | 50000 | dbatwo   | dbatwo   |            51000 |<br/>
   11 |       3 | m    | m              | s    | u      | 50001 | dbatwo   | dbatwo   |            51001 |<br/>
   12 |       4 | m    | m              | s    | u      | 50000 | dbafour  | dbafour  |            51000 |<br/>
   13 |       5 | m    | m              | s    | u      | 50001 | dbafour  | dbafour  |            51001 |<br/>
   14 |      -1 | m    | m              | s    | u      |  5432 | dbafour  | dbafour  |                  |<br/>
(14 rows)</p>

<p>[root@dbafour ~]# ps aux | grep green | grep -v grep<br/>
gpadmin   7423  3.0  2.5 428824 204492 ?       Ss   10:48   0:00 /opt/greenplum/greenplum-db-4.3.6.1/bin/postgres -D /opt/greenplum/greenplum-db/gpdata/gpmaster/gpseg-1 -p 5432 -b 14 -z 6 --silent-mode=true -i -M master -C -1 -x 0 -y -E<br/>
gpadmin   8283  0.0  2.8 469228 227376 ?       Ss   Apr01   0:01 /opt/greenplum/greenplum-db-4.3.6.1/bin/postgres -D /opt/greenplum/greenplum-db/gpdata/gpdatam2/gpseg5 -p 50001 -b 13 -z 6 --silent-mode=true -i -M quiescent -C 5<br/>
gpadmin   8284  0.0  2.8 471332 229840 ?       Ss   Apr01   0:09 /opt/greenplum/greenplum-db-4.3.6.1/bin/postgres -D /opt/greenplum/greenplum-db/gpdata/gpdatap2/gpseg1 -p 40001 -b 3 -z 6 --silent-mode=true -i -M quiescent -C 1<br/>
gpadmin   8285  0.0  2.8 471336 227812 ?       Ss   Apr01   0:09 /opt/greenplum/greenplum-db-4.3.6.1/bin/postgres -D /opt/greenplum/greenplum-db/gpdata/gpdatap1/gpseg0 -p 40000 -b 2 -z 6 --silent-mode=true -i -M quiescent -C 0<br/>
gpadmin   8286  0.0  2.8 469232 229420 ?       Ss   Apr01   0:01 /opt/greenplum/greenplum-db-4.3.6.1/bin/postgres -D /opt/greenplum/greenplum-db/gpdata/gpdatam1/gpseg4 -p 50000 -b 12 -z 6 --silent-mode=true -i -M quiescent -C 4</p>

<p>[gpadmin@dbaone ~]$ gpstate -f</p>

<blockquote>
<p>20160408:11:36:43:002727 gpstate:dbaone:gpadmin-[INFO]:-Starting gpstate with args: -f<br/>
20160408:11:36:43:002727 gpstate:dbaone:gpadmin-[INFO]:-local Greenplum Version: &#39;postgres (Greenplum Database) 4.3.6.1 build 2&#39;<br/>
20160408:11:36:43:002727 gpstate:dbaone:gpadmin-[INFO]:-master Greenplum Version: &#39;PostgreSQL 8.2.15 (Greenplum Database 4.3.6.1 build 2) on x86_64-unknown-linux-gnu, compiled by GCC gcc (GCC) 4.4.2 compiled on Oct  1 2015 15:14:22&#39;<br/>
20160408:11:36:43:002727 gpstate:dbaone:gpadmin-[INFO]:-Obtaining Segment details from master...<br/>
20160408:11:36:44:002727 gpstate:dbaone:gpadmin-[INFO]:-Standby master details<br/>
20160408:11:36:44:002727 gpstate:dbaone:gpadmin-[INFO]:-----------------------<br/>
20160408:11:36:44:002727 gpstate:dbaone:gpadmin-[INFO]:-   Standby address          = dbafour<br/>
20160408:11:36:44:002727 gpstate:dbaone:gpadmin-[INFO]:-   Standby data directory   = /opt/greenplum/greenplum-db/gpdata/gpmaster/gpseg-1<br/>
20160408:11:36:44:002727 gpstate:dbaone:gpadmin-[INFO]:-   Standby port             = 5432<br/>
20160408:11:36:44:002727 gpstate:dbaone:gpadmin-[INFO]:-   Standby PID              = 7423<br/>
20160408:11:36:44:002727 gpstate:dbaone:gpadmin-[INFO]:-   Standby status           = Standby host passive<br/>
20160408:11:36:44:002727 gpstate:dbaone:gpadmin-[INFO]:--------------------------------------------------------------<br/>
20160408:11:36:44:002727 gpstate:dbaone:gpadmin-[INFO]:--pg_stat_replication<br/>
20160408:11:36:44:002727 gpstate:dbaone:gpadmin-[INFO]:--------------------------------------------------------------<br/>
20160408:11:36:44:002727 gpstate:dbaone:gpadmin-[INFO]:--WAL Sender State: streaming<br/>
20160408:11:36:44:002727 gpstate:dbaone:gpadmin-[INFO]:--Sync state: sync<br/>
20160408:11:36:44:002727 gpstate:dbaone:gpadmin-[INFO]:--Sent Location: 0/C0000C0<br/>
20160408:11:36:44:002727 gpstate:dbaone:gpadmin-[INFO]:--Flush Location: 0/C0000C0<br/>
20160408:11:36:44:002727 gpstate:dbaone:gpadmin-[INFO]:--Replay Location: 0/C0000C0<br/>
20160408:11:36:44:002727 gpstate:dbaone:gpadmin-[INFO]:--------------------------------------------------------------</p>
</blockquote>

<p>[gpadmin@dbaone ~]$ gpstate -s</p>

<blockquote>
<p>20160408:10:48:52:001833 gpstate:dbaone:gpadmin-[INFO]:-Starting gpstate with args: -s<br/>
20160408:10:48:52:001833 gpstate:dbaone:gpadmin-[INFO]:-local Greenplum Version: &#39;postgres (Greenplum Database) 4.3.6.1 build 2&#39;<br/>
20160408:10:48:52:001833 gpstate:dbaone:gpadmin-[INFO]:-master Greenplum Version: &#39;PostgreSQL 8.2.15 (Greenplum Database 4.3.6.1 build 2) on x86_64-unknown-linux-gnu, compiled by GCC gcc (GCC) 4.4.2 compiled on Oct  1 2015 15:14:22&#39;<br/>
20160408:10:48:52:001833 gpstate:dbaone:gpadmin-[INFO]:-Obtaining Segment details from master...<br/>
20160408:10:48:52:001833 gpstate:dbaone:gpadmin-[INFO]:-Gathering data from segments...<br/>
.<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-----------------------------------------------------<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:--Master Configuration &amp; Status<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-----------------------------------------------------<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Master host                    = dbaone<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Master postgres process ID     = 26859<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Master data directory          = /opt/greenplum/greenplum-db/gpdata/gpmaster/gpseg-1<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Master port                    = 5432<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Master current role            = dispatch<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Greenplum initsystem version   = 4.3.6.1 build 2<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Greenplum current version      = PostgreSQL 8.2.15 (Greenplum Database 4.3.6.1 build 2) on x86_64-unknown-linux-gnu, compiled by GCC gcc (GCC) 4.4.2 compiled on Oct  1 2015 15:14:22<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Postgres version               = 8.2.15<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Master standby                 = dbafour<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Standby master state           = Standby host passive<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-----------------------------------------------------<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-Segment Instance Status Report<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-----------------------------------------------------<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Segment Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Hostname                          = dbafour<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Address                           = dbafour<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Datadir                           = /opt/greenplum/greenplum-db/gpdata/gpdatap1/gpseg0<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Port                              = 40000<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Mirroring Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Current role                      = Primary<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Preferred role                    = Primary<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Mirror status                     = Synchronized<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Status<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      PID                               = 8285<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Configuration reports status as   = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Database status                   = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-----------------------------------------------------<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Segment Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Hostname                          = dbathree<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Address                           = dbathree<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Datadir                           = /opt/greenplum/greenplum-db/gpdata/gpdatam1/gpseg0<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Port                              = 50000<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Mirroring Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Current role                      = Mirror<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Preferred role                    = Mirror<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Mirror status                     = Synchronized<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Status<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      PID                               = 17476<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Configuration reports status as   = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Segment status                    = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-----------------------------------------------------<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Segment Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Hostname                          = dbafour<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Address                           = dbafour<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Datadir                           = /opt/greenplum/greenplum-db/gpdata/gpdatap2/gpseg1<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Port                              = 40001<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Mirroring Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Current role                      = Primary<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Preferred role                    = Primary<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Mirror status                     = Synchronized<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Status<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      PID                               = 8284<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Configuration reports status as   = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Database status                   = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-----------------------------------------------------<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Segment Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Hostname                          = dbathree<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Address                           = dbathree<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Datadir                           = /opt/greenplum/greenplum-db/gpdata/gpdatam2/gpseg1<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Port                              = 50001<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Mirroring Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Current role                      = Mirror<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Preferred role                    = Mirror<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Mirror status                     = Synchronized<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Status<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      PID                               = 17475<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Configuration reports status as   = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Segment status                    = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-----------------------------------------------------<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Segment Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Hostname                          = dbathree<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Address                           = dbathree<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Datadir                           = /opt/greenplum/greenplum-db/gpdata/gpdatap1/gpseg2<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Port                              = 40000<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Mirroring Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Current role                      = Primary<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Preferred role                    = Primary<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Mirror status                     = Synchronized<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Status<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      PID                               = 17474<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Configuration reports status as   = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Database status                   = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-----------------------------------------------------<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Segment Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Hostname                          = dbatwo<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Address                           = dbatwo<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Datadir                           = /opt/greenplum/greenplum-db/gpdata/gpdatam1/gpseg2<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Port                              = 50000<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Mirroring Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Current role                      = Mirror<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Preferred role                    = Mirror<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Mirror status                     = Synchronized<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Status<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      PID                               = 19407<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Configuration reports status as   = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Segment status                    = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-----------------------------------------------------<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Segment Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Hostname                          = dbathree<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Address                           = dbathree<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Datadir                           = /opt/greenplum/greenplum-db/gpdata/gpdatap2/gpseg3<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Port                              = 40001<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Mirroring Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Current role                      = Primary<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Preferred role                    = Primary<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Mirror status                     = Synchronized<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Status<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      PID                               = 17473<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Configuration reports status as   = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Database status                   = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-----------------------------------------------------<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Segment Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Hostname                          = dbatwo<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Address                           = dbatwo<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Datadir                           = /opt/greenplum/greenplum-db/gpdata/gpdatam2/gpseg3<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Port                              = 50001<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Mirroring Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Current role                      = Mirror<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Preferred role                    = Mirror<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Mirror status                     = Synchronized<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Status<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      PID                               = 19406<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Configuration reports status as   = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Segment status                    = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-----------------------------------------------------<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Segment Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Hostname                          = dbatwo<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Address                           = dbatwo<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Datadir                           = /opt/greenplum/greenplum-db/gpdata/gpdatap1/gpseg4<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Port                              = 40000<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Mirroring Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Current role                      = Primary<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Preferred role                    = Primary<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Mirror status                     = Synchronized<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Status<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      PID                               = 19408<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Configuration reports status as   = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Database status                   = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-----------------------------------------------------<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Segment Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Hostname                          = dbafour<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Address                           = dbafour<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Datadir                           = /opt/greenplum/greenplum-db/gpdata/gpdatam1/gpseg4<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Port                              = 50000<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Mirroring Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Current role                      = Mirror<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Preferred role                    = Mirror<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Mirror status                     = Synchronized<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Status<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      PID                               = 8286<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Configuration reports status as   = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Segment status                    = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-----------------------------------------------------<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Segment Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Hostname                          = dbatwo<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Address                           = dbatwo<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Datadir                           = /opt/greenplum/greenplum-db/gpdata/gpdatap2/gpseg5<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Port                              = 40001<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Mirroring Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Current role                      = Primary<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Preferred role                    = Primary<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Mirror status                     = Synchronized<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Status<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      PID                               = 19405<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Configuration reports status as   = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Database status                   = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-----------------------------------------------------<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Segment Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Hostname                          = dbafour<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Address                           = dbafour<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Datadir                           = /opt/greenplum/greenplum-db/gpdata/gpdatam2/gpseg5<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Port                              = 50001<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Mirroring Info<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Current role                      = Mirror<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Preferred role                    = Mirror<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Mirror status                     = Synchronized<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-   Status<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      PID                               = 8283<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Configuration reports status as   = Up<br/>
20160408:10:48:53:001833 gpstate:dbaone:gpadmin-[INFO]:-      Segment status                    = Up</p>
</blockquote>

<h2 id="toc_26">启用 Standby Master</h2>

<blockquote>
<p>确认 Standby Master 是同步的</p>
</blockquote>

<p>gpstate -f </p>

<pre><code>20160408:11:36:44:002727 gpstate:dbaone:gpadmin-[INFO]:--WAL Sender State: streaming
20160408:11:36:44:002727 gpstate:dbaone:gpadmin-[INFO]:--Sync state: sync
</code></pre>

<blockquote>
<p>关闭原 Master</p>
</blockquote>

<p>gpstop -m</p>

<blockquote>
<p>在 Standby Master 上激活</p>
</blockquote>

<p>vim .bash_profile</p>

<pre><code>source /opt/greenplum/greenplum-db/greenplum_path.sh
export MASTER_DATA_DIRECTORY=/opt/greenplum/greenplum-db/gpdata/gpmaster/gpseg-1
export GPPORT=5432
export PGDATABASE=testdb
</code></pre>

<p>. .bash_profile</p>

<p>gpactivatestandby -d $MASTER_DATA_DIRECTORY </p>

<blockquote>
<p>对整个数据库进行 ANALYZE ，收集统计信息</p>
</blockquote>

<p>psql -d testdb -c &quot;ANALYZE&quot;</p>

<blockquote>
<p>所有客户端的IP，连接到 Standby Master</p>

<p>切换原有的 Master，使用gpinitstandby</p>
</blockquote>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/7/16</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Greenplum.html'>Greenplum</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      
                        <a href="15001790106489.html#disqus_thread">comments</a>
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
              


			<div class="row">
			  <div class="large-6 columns">
			  <p class="text-left" style="padding-top:25px;">
			   
			  </p>
			  </div>
			  <div class="large-6 columns">
			<p class="text-right" style="padding-top:25px;">
			
			</p>
			  </div>
			</div>
		</div>
	</div><!-- large 8 -->

 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <div class="site-a-logo"><img src="images/blog_icon.jpg" /></div>
            
                <h1>DBA Plus</h1>
                <div class="site-des"></div>
                <div class="social">






<a target="_blank" class="instagram" href="https://www.instagram.com/dbaplus" title="Instagram">Instagram</a>
<a target="_blank" class="weibo" href="http://www.weibo.com/saup007" title="weibo">Weibo</a>

<a target="_blank" class="github" target="_blank" href="https://github.com/saup007" title="GitHub">GitHub</a>

  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="Redis.html"><strong>Redis</strong></a>
        
            <a href="MySQL.html"><strong>MySQL</strong></a>
        
            <a href="Greenplum.html"><strong>Greenplum</strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="15001795567958.html"></a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15001793154180.html">安装Performance Monitor</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15001790106489.html">Greenplum安装篇</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15000823671749.html">Group Replication</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="14999625908463.html">Redis Install 3.2.9</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>


<script type="text/javascript">
    var disqus_shortname = 'saup007'; 

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

<script type="text/javascript">
var disqus_shortname = 'saup007'; 

(function () {
var s = document.createElement('script'); s.async = true;
s.type = 'text/javascript';
s.src = '//' + disqus_shortname + '.disqus.com/count.js';
(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>
  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>

    



  </body>
</html>
